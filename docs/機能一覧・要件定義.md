# 機能一覧・要件定義

## 機能カテゴリ別一覧

### 🔐 認証・権限管理
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| ログイン機能 | メール・パスワードによる認証 | 高 | 全員 |
| ロール管理 | 学生/部署担当者/労務担当者の権限分離 | 高 | 全員 |
| パスワードリセット | メール経由でのパスワード再設定 | 中 | 全員 |

### 📅 シフト管理
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| シフト希望提出 | カレンダー形式での希望時間入力 | 高 | 学生 |
| 週20時間制限チェック | リアルタイムでの制限確認 | 高 | 学生/管理者 |
| 掛け持ちバイト時間管理 | 他バイト時間との合計40時間チェック | 高 | 学生/管理者 |
| シフト再編集機能 | 提出後も制限内であれば再編集可能 | 高 | 学生 |
| シフト一覧表示 | 部署全体のシフト可視化 | 中 | 管理者 |

### ⏰ 勤怠管理
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| 出退勤登録 | 時刻・休憩時間の登録 | 高 | 学生 |
| 休憩時間自動チェック | 6時間以上勤務時の1時間休憩確認 | 高 | 学生/管理者 |
| 実労働時間計算 | 出退勤時刻から休憩時間を除いた実労働時間算出 | 高 | 学生/管理者 |
| 勤怠承認 | 管理者による勤怠内容確認・承認 | 高 | 管理者 |
| PCログ照合 | システムログとの整合性チェック | 中 | 管理者 |
| 週/月次集計 | 労働時間の自動集計 | 中 | 全員 |

### 📝 申請管理
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| 欠勤申請 | 欠勤理由・日付の申請 | 高 | 学生 |
| 遅刻申請 | 遅刻理由・予定到着時刻の申請 | 高 | 学生 |
| 早退申請 | 早退理由・予定退勤時刻の申請 | 高 | 学生 |
| 交通費申請 | 経路・金額・領収書添付 | 中 | 学生 |
| 申請承認フロー | 管理者→労務担当者の2段階承認 | 高 | 管理者/労務 |
| 申請一覧・状況確認 | 申請履歴と承認状況の確認 | 中 | 学生 |

### 📊 レポート・分析
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| 制約違反レポート | 週20時間・合計40時間超過者一覧 | 高 | 労務 |
| 勤怠集計レポート | 部署別・個人別の勤怠サマリー | 中 | 管理者/労務 |
| ダッシュボード | 各ユーザー向けの概要表示 | 高 | 全員 |
| アラート機能 | 制約違反時の自動通知 | 中 | 全員 |

### 🔗 外部ツール連携・月末締め
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| 月末締め作業管理 | ジョブカン・ラクロー作業完了チェック | 高 | 全員 |
| 外部ツールリンク | ジョブカン・ラクローへの直接リンク | 高 | 学生 |
| 締め作業承認フロー | 学生→部署担当者→労務担当者の3段階承認 | 高 | 管理者/労務 |
| 締切リマインド | 最終出社日のSlack通知 | 中 | 学生/管理者 |
| 締め作業履歴管理 | 月別の締め作業完了状況記録 | 中 | 労務 |

### 🔔 通知機能
| 機能名 | 詳細 | 優先度 | 対象ユーザー |
|--------|------|--------|-------------|
| 申請状況通知 | 申請承認・差し戻し時の通知 | 中 | 学生 |
| 制約違反通知 | 時間超過時の自動アラート | 高 | 学生/管理者 |
| 承認依頼通知 | 管理者への承認依頼通知 | 中 | 管理者/労務 |

## 非機能要件

### セキュリティ
- HTTPS通信必須
- パスワードのハッシュ化
- セッション管理
- CSRF対策
- SQL インジェクション対策

### パフォーマンス
- ページ読み込み時間 3秒以内
- 同時接続ユーザー数 50名対応
- データバックアップ（日次）

### 使いやすさ
- レスポンシブデザイン（スマートフォン対応）
- 直感的なUI/UX
- エラーメッセージの分かりやすさ

### 保守性
- コードの可読性
- テストカバレッジ 80% 以上
- ログ出力機能

## 開発優先度

### MVP（Minimum Viable Product）
1. **認証機能**（ログイン・ロール管理）
2. **シフト希望提出**（基本的なカレンダー入力、承認不要）
3. **週20時間制限チェック**（自動バリデーション）
4. **勤怠登録**（出退勤・休憩時間）
5. **勤怠承認**（管理者機能 - シフト希望は承認対象外）

### フェーズ2
1. **掛け持ちバイト管理**
2. **申請機能**（欠勤・遅刻・早退）
3. **月末締め作業管理**（外部ツール連携）
4. **PCログ照合**
5. **基本的なレポート機能**

### フェーズ3
1. **交通費申請・承認**
2. **締切リマインド機能**（Slack通知）
3. **詳細なレポート・分析**
4. **通知機能**
5. **UI/UX改善**

## 制約条件

### ビジネスルール
- 週20時間以内の実労働時間（学生アルバイト）※休憩時間除く
- 掛け持ちバイト含めて合計40時間/週以下（実労働時間ベース）
- 休憩時間は複数回取得可能、1時間以上も可
- 出退勤時刻の変更は事前連絡があればOK
- 勤務時間帯：9:00-18:00（基本）

### 技術制約
- フレームワーク：Rails + Vue.js
- データベース：PostgreSQL
- クラウド：未定（AWS/Heroku等）
- 既存システム（ラクロー）との連携は将来的に検討

### 運用制約
- 初期導入時は1部署のみ
- 将来的に全社展開を想定
- メンテナンス時間：土日の深夜帯